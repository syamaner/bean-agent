============================= test session starts ==============================
platform darwin -- Python 3.11.14, pytest-8.4.2, pluggy-1.6.0 -- /Users/sertanyamaner/git/coffee-roasting/venv/bin/python3.11
cachedir: .pytest_cache
rootdir: /Users/sertanyamaner/git/coffee-roasting
configfile: pytest.ini
plugins: asyncio-1.2.0, anyio-4.11.0, Faker-37.11.0, requests-mock-1.12.1, cov-7.0.0
asyncio: mode=Mode.STRICT, debug=False, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
collecting ... collected 240 items

tests/unit/mcp_servers/first_crack_detection/test_audio_devices.py::test_list_audio_devices_returns_list PASSED [  0%]
tests/unit/mcp_servers/first_crack_detection/test_audio_devices.py::test_list_audio_devices_filters_output_only PASSED [  0%]
tests/unit/mcp_servers/first_crack_detection/test_audio_devices.py::test_find_usb_microphone_returns_index PASSED [  1%]
tests/unit/mcp_servers/first_crack_detection/test_audio_devices.py::test_find_usb_microphone_case_insensitive PASSED [  1%]
tests/unit/mcp_servers/first_crack_detection/test_audio_devices.py::test_find_usb_microphone_returns_none_if_not_found PASSED [  2%]
tests/unit/mcp_servers/first_crack_detection/test_audio_devices.py::test_find_usb_microphone_skips_default_device PASSED [  2%]
tests/unit/mcp_servers/first_crack_detection/test_audio_devices.py::test_find_builtin_microphone_returns_default PASSED [  2%]
tests/unit/mcp_servers/first_crack_detection/test_audio_devices.py::test_find_builtin_microphone_returns_none_on_error PASSED [  3%]
tests/unit/mcp_servers/first_crack_detection/test_audio_devices.py::test_get_device_info_returns_details PASSED [  3%]
tests/unit/mcp_servers/first_crack_detection/test_audio_devices.py::test_validate_audio_source_audio_file_valid PASSED [  4%]
tests/unit/mcp_servers/first_crack_detection/test_audio_devices.py::test_validate_audio_source_audio_file_not_found PASSED [  4%]
tests/unit/mcp_servers/first_crack_detection/test_audio_devices.py::test_validate_audio_source_usb_microphone_found PASSED [  5%]
tests/unit/mcp_servers/first_crack_detection/test_audio_devices.py::test_validate_audio_source_usb_microphone_not_found PASSED [  5%]
tests/unit/mcp_servers/first_crack_detection/test_audio_devices.py::test_validate_audio_source_builtin_microphone_found PASSED [  5%]
tests/unit/mcp_servers/first_crack_detection/test_audio_devices.py::test_validate_audio_source_builtin_microphone_not_found PASSED [  6%]
tests/unit/mcp_servers/first_crack_detection/test_audio_devices.py::test_validate_audio_source_invalid_type PASSED [  6%]
tests/unit/mcp_servers/first_crack_detection/test_config.py::test_load_config_from_json_file PASSED [  7%]
tests/unit/mcp_servers/first_crack_detection/test_config.py::test_load_config_with_defaults PASSED [  7%]
tests/unit/mcp_servers/first_crack_detection/test_config.py::test_load_config_env_var_override PASSED [  7%]
tests/unit/mcp_servers/first_crack_detection/test_config.py::test_load_config_missing_file_raises_error PASSED [  8%]
tests/unit/mcp_servers/first_crack_detection/test_config.py::test_load_config_invalid_json_raises_error PASSED [  8%]
tests/unit/mcp_servers/first_crack_detection/test_config.py::test_load_config_partial_overrides PASSED [  9%]
tests/unit/mcp_servers/first_crack_detection/test_config.py::test_load_config_validation_error PASSED [  9%]
tests/unit/mcp_servers/first_crack_detection/test_config.py::test_load_config_with_full_config PASSED [ 10%]
tests/unit/mcp_servers/first_crack_detection/test_config.py::test_load_config_env_var_partial_override PASSED [ 10%]
tests/unit/mcp_servers/first_crack_detection/test_config.py::test_config_to_dict PASSED [ 10%]
tests/unit/mcp_servers/first_crack_detection/test_config.py::test_get_default_config_path PASSED [ 11%]
tests/unit/mcp_servers/first_crack_detection/test_exceptions.py::test_detection_error_base PASSED [ 11%]
tests/unit/mcp_servers/first_crack_detection/test_exceptions.py::test_model_not_found_error PASSED [ 12%]
tests/unit/mcp_servers/first_crack_detection/test_exceptions.py::test_microphone_not_available_error PASSED [ 12%]
tests/unit/mcp_servers/first_crack_detection/test_exceptions.py::test_file_not_found_error PASSED [ 12%]
tests/unit/mcp_servers/first_crack_detection/test_exceptions.py::test_session_already_active_error PASSED [ 13%]
tests/unit/mcp_servers/first_crack_detection/test_exceptions.py::test_thread_crash_error PASSED [ 13%]
tests/unit/mcp_servers/first_crack_detection/test_exceptions.py::test_invalid_audio_source_error PASSED [ 14%]
tests/unit/mcp_servers/first_crack_detection/test_exceptions.py::test_exception_with_details PASSED [ 14%]
tests/unit/mcp_servers/first_crack_detection/test_exceptions.py::test_exception_without_details PASSED [ 15%]
tests/unit/mcp_servers/first_crack_detection/test_exceptions.py::test_exception_inheritance PASSED [ 15%]
tests/unit/mcp_servers/first_crack_detection/test_exceptions.py::test_exception_can_be_caught_as_detection_error PASSED [ 15%]
tests/unit/mcp_servers/first_crack_detection/test_exceptions.py::test_exception_repr PASSED [ 16%]
tests/unit/mcp_servers/first_crack_detection/test_models.py::test_audio_config_audio_file PASSED [ 16%]
tests/unit/mcp_servers/first_crack_detection/test_models.py::test_audio_config_audio_file_missing_path PASSED [ 17%]
tests/unit/mcp_servers/first_crack_detection/test_models.py::test_audio_config_usb_microphone PASSED [ 17%]
tests/unit/mcp_servers/first_crack_detection/test_models.py::test_audio_config_builtin_microphone PASSED [ 17%]
tests/unit/mcp_servers/first_crack_detection/test_models.py::test_audio_config_invalid_type PASSED [ 18%]
tests/unit/mcp_servers/first_crack_detection/test_models.py::test_detection_config_defaults PASSED [ 18%]
tests/unit/mcp_servers/first_crack_detection/test_models.py::test_detection_config_custom_values PASSED [ 19%]
tests/unit/mcp_servers/first_crack_detection/test_models.py::test_detection_config_threshold_validation PASSED [ 19%]
tests/unit/mcp_servers/first_crack_detection/test_models.py::test_detection_config_min_pops_validation PASSED [ 20%]
tests/unit/mcp_servers/first_crack_detection/test_models.py::test_session_info_structure PASSED [ 20%]
tests/unit/mcp_servers/first_crack_detection/test_models.py::test_session_info_already_running PASSED [ 20%]
tests/unit/mcp_servers/first_crack_detection/test_models.py::test_status_info_no_session PASSED [ 21%]
tests/unit/mcp_servers/first_crack_detection/test_models.py::test_status_info_active_no_detection PASSED [ 21%]
tests/unit/mcp_servers/first_crack_detection/test_models.py::test_status_info_with_detection PASSED [ 22%]
tests/unit/mcp_servers/first_crack_detection/test_models.py::test_session_summary_stopped PASSED [ 22%]
tests/unit/mcp_servers/first_crack_detection/test_models.py::test_session_summary_no_active_session PASSED [ 22%]
tests/unit/mcp_servers/first_crack_detection/test_models.py::test_server_config PASSED [ 23%]
tests/unit/mcp_servers/first_crack_detection/test_models.py::test_server_config_defaults PASSED [ 23%]
tests/unit/mcp_servers/first_crack_detection/test_models.py::test_detection_session_dataclass PASSED [ 24%]
tests/unit/mcp_servers/first_crack_detection/test_session_manager.py::test_session_manager_initialization PASSED [ 24%]
tests/unit/mcp_servers/first_crack_detection/test_session_manager.py::test_start_session_creates_new_session PASSED [ 25%]
tests/unit/mcp_servers/first_crack_detection/test_session_manager.py::test_start_session_idempotent_when_already_running PASSED [ 25%]
tests/unit/mcp_servers/first_crack_detection/test_session_manager.py::test_start_session_validates_model_checkpoint PASSED [ 25%]
tests/unit/mcp_servers/first_crack_detection/test_session_manager.py::test_start_session_validates_audio_file PASSED [ 26%]
tests/unit/mcp_servers/first_crack_detection/test_session_manager.py::test_get_status_no_active_session PASSED [ 26%]
tests/unit/mcp_servers/first_crack_detection/test_session_manager.py::test_get_status_with_active_session PASSED [ 27%]
tests/unit/mcp_servers/first_crack_detection/test_session_manager.py::test_get_status_with_first_crack_detected PASSED [ 27%]
tests/unit/mcp_servers/first_crack_detection/test_session_manager.py::test_stop_session_stops_active_session PASSED [ 27%]
tests/unit/mcp_servers/first_crack_detection/test_session_manager.py::test_stop_session_idempotent_when_no_session PASSED [ 28%]
tests/unit/mcp_servers/first_crack_detection/test_session_manager.py::test_session_manager_thread_safe PASSED [ 28%]
tests/unit/mcp_servers/first_crack_detection/test_session_manager.py::test_validate_audio_source_usb_microphone PASSED [ 29%]
tests/unit/mcp_servers/first_crack_detection/test_session_manager.py::test_session_timestamps_in_utc_and_local PASSED [ 29%]
tests/unit/mcp_servers/first_crack_detection/test_utils.py::test_get_local_timezone_returns_zoneinfo PASSED [ 30%]
tests/unit/mcp_servers/first_crack_detection/test_utils.py::test_get_local_timezone_is_system_timezone PASSED [ 30%]
tests/unit/mcp_servers/first_crack_detection/test_utils.py::test_to_local_time_converts_utc_to_local PASSED [ 30%]
tests/unit/mcp_servers/first_crack_detection/test_utils.py::test_to_local_time_preserves_moment PASSED [ 31%]
tests/unit/mcp_servers/first_crack_detection/test_utils.py::test_format_elapsed_time_zero_seconds PASSED [ 31%]
tests/unit/mcp_servers/first_crack_detection/test_utils.py::test_format_elapsed_time_less_than_minute PASSED [ 32%]
tests/unit/mcp_servers/first_crack_detection/test_utils.py::test_format_elapsed_time_exactly_one_minute PASSED [ 32%]
tests/unit/mcp_servers/first_crack_detection/test_utils.py::test_format_elapsed_time_minutes_and_seconds PASSED [ 32%]
tests/unit/mcp_servers/first_crack_detection/test_utils.py::test_format_elapsed_time_ten_minutes PASSED [ 33%]
tests/unit/mcp_servers/first_crack_detection/test_utils.py::test_format_elapsed_time_rounds_down PASSED [ 33%]
tests/unit/mcp_servers/first_crack_detection/test_utils.py::test_format_elapsed_time_handles_float PASSED [ 34%]
tests/unit/mcp_servers/first_crack_detection/test_utils.py::test_setup_logging_configures_logger PASSED [ 34%]
tests/unit/mcp_servers/first_crack_detection/test_utils.py::test_setup_logging_info_level PASSED [ 35%]
tests/unit/mcp_servers/first_crack_detection/test_utils.py::test_setup_logging_warning_level PASSED [ 35%]
tests/unit/mcp_servers/first_crack_detection/test_utils.py::test_setup_logging_creates_structured_format PASSED [ 35%]
tests/unit/mcp_servers/roaster_control/test_exceptions.py::TestRoasterError::test_base_exception PASSED [ 36%]
tests/unit/mcp_servers/roaster_control/test_exceptions.py::TestRoasterError::test_is_exception PASSED [ 36%]
tests/unit/mcp_servers/roaster_control/test_exceptions.py::TestRoasterNotConnectedError::test_not_connected_error PASSED [ 37%]
tests/unit/mcp_servers/roaster_control/test_exceptions.py::TestRoasterNotConnectedError::test_is_roaster_error PASSED [ 37%]
tests/unit/mcp_servers/roaster_control/test_exceptions.py::TestRoasterConnectionError::test_connection_error_with_details PASSED [ 37%]
tests/unit/mcp_servers/roaster_control/test_exceptions.py::TestRoasterConnectionError::test_is_roaster_error PASSED [ 38%]
tests/unit/mcp_servers/roaster_control/test_exceptions.py::TestInvalidCommandError::test_invalid_command_with_reason PASSED [ 38%]
tests/unit/mcp_servers/roaster_control/test_exceptions.py::TestInvalidCommandError::test_is_roaster_error PASSED [ 39%]
tests/unit/mcp_servers/roaster_control/test_exceptions.py::TestNoActiveRoastError::test_no_active_roast PASSED [ 39%]
tests/unit/mcp_servers/roaster_control/test_exceptions.py::TestNoActiveRoastError::test_is_roaster_error PASSED [ 40%]
tests/unit/mcp_servers/roaster_control/test_exceptions.py::TestBeansNotAddedError::test_beans_not_added PASSED [ 40%]
tests/unit/mcp_servers/roaster_control/test_exceptions.py::TestBeansNotAddedError::test_is_roaster_error PASSED [ 40%]
tests/unit/mcp_servers/roaster_control/test_hardware.py::TestMockRoaster::test_initial_state PASSED [ 41%]
tests/unit/mcp_servers/roaster_control/test_hardware.py::TestMockRoaster::test_connect PASSED [ 41%]
tests/unit/mcp_servers/roaster_control/test_hardware.py::TestMockRoaster::test_disconnect PASSED [ 42%]
tests/unit/mcp_servers/roaster_control/test_hardware.py::TestMockRoaster::test_get_roaster_info PASSED [ 42%]
tests/unit/mcp_servers/roaster_control/test_hardware.py::TestMockRoaster::test_read_sensors_when_not_connected PASSED [ 42%]
tests/unit/mcp_servers/roaster_control/test_hardware.py::TestMockRoaster::test_read_sensors_when_connected PASSED [ 43%]
tests/unit/mcp_servers/roaster_control/test_hardware.py::TestMockRoaster::test_initial_temperatures PASSED [ 43%]
tests/unit/mcp_servers/roaster_control/test_hardware.py::TestMockRoaster::test_set_heat_validation_not_connected PASSED [ 44%]
tests/unit/mcp_servers/roaster_control/test_hardware.py::TestMockRoaster::test_set_heat_valid_values PASSED [ 44%]
tests/unit/mcp_servers/roaster_control/test_hardware.py::TestMockRoaster::test_set_heat_invalid_not_10_percent PASSED [ 45%]
tests/unit/mcp_servers/roaster_control/test_hardware.py::TestMockRoaster::test_set_heat_invalid_negative PASSED [ 45%]
tests/unit/mcp_servers/roaster_control/test_hardware.py::TestMockRoaster::test_set_heat_invalid_too_high PASSED [ 45%]
tests/unit/mcp_servers/roaster_control/test_hardware.py::TestMockRoaster::test_set_fan_valid_values PASSED [ 46%]
tests/unit/mcp_servers/roaster_control/test_hardware.py::TestMockRoaster::test_set_fan_invalid_not_10_percent PASSED [ 46%]
tests/unit/mcp_servers/roaster_control/test_hardware.py::TestMockRoaster::test_drum_motor_control PASSED [ 47%]
tests/unit/mcp_servers/roaster_control/test_hardware.py::TestMockRoaster::test_drop_beans PASSED [ 47%]
tests/unit/mcp_servers/roaster_control/test_hardware.py::TestMockRoaster::test_cooling_control PASSED [ 47%]
tests/unit/mcp_servers/roaster_control/test_hardware.py::TestMockRoaster::test_temperature_simulation_heat_increases_temp PASSED [ 48%]
tests/unit/mcp_servers/roaster_control/test_hardware.py::TestMockRoaster::test_temperature_simulation_fan_decreases_temp PASSED [ 48%]
tests/unit/mcp_servers/roaster_control/test_hardware.py::TestHottopRoaster::test_roaster_info FAILED [ 49%]
tests/unit/mcp_servers/roaster_control/test_hardware.py::TestHottopRoaster::test_initialization PASSED [ 49%]
tests/unit/mcp_servers/roaster_control/test_hardware.py::TestHottopRoaster::test_connection_with_hardware SKIPPED [ 50%]
tests/unit/mcp_servers/roaster_control/test_hardware.py::TestStubRoaster::test_roaster_info PASSED [ 50%]
tests/unit/mcp_servers/roaster_control/test_hardware.py::TestStubRoaster::test_connection PASSED [ 50%]
tests/unit/mcp_servers/roaster_control/test_hardware.py::TestHardwareInterface::test_cannot_instantiate_abstract_class PASSED [ 51%]
tests/unit/mcp_servers/roaster_control/test_models.py::TestSensorReading::test_valid_reading PASSED [ 51%]
tests/unit/mcp_servers/roaster_control/test_models.py::TestSensorReading::test_temperature_validation_too_low PASSED [ 52%]
tests/unit/mcp_servers/roaster_control/test_models.py::TestSensorReading::test_temperature_validation_too_high PASSED [ 52%]
tests/unit/mcp_servers/roaster_control/test_models.py::TestSensorReading::test_percentage_validation_negative PASSED [ 52%]
tests/unit/mcp_servers/roaster_control/test_models.py::TestSensorReading::test_percentage_validation_too_high PASSED [ 53%]
tests/unit/mcp_servers/roaster_control/test_models.py::TestRoastMetrics::test_all_none_initially PASSED [ 53%]
tests/unit/mcp_servers/roaster_control/test_models.py::TestRoastMetrics::test_partial_metrics PASSED [ 54%]
tests/unit/mcp_servers/roaster_control/test_models.py::TestRoastMetrics::test_complete_metrics PASSED [ 54%]
tests/unit/mcp_servers/roaster_control/test_models.py::TestHardwareConfig::test_default_values FAILED [ 55%]
tests/unit/mcp_servers/roaster_control/test_models.py::TestHardwareConfig::test_custom_values PASSED [ 55%]
tests/unit/mcp_servers/roaster_control/test_models.py::TestTrackerConfig::test_default_values PASSED [ 55%]
tests/unit/mcp_servers/roaster_control/test_models.py::TestTrackerConfig::test_custom_threshold PASSED [ 56%]
tests/unit/mcp_servers/roaster_control/test_models.py::TestTrackerConfig::test_custom_dev_time_targets PASSED [ 56%]
tests/unit/mcp_servers/roaster_control/test_models.py::TestServerConfig::test_default_values PASSED [ 57%]
tests/unit/mcp_servers/roaster_control/test_models.py::TestServerConfig::test_nested_config PASSED [ 57%]
tests/unit/mcp_servers/roaster_control/test_models.py::TestRoastStatus::test_minimal_status PASSED [ 57%]
tests/unit/mcp_servers/roaster_control/test_models.py::TestRoastStatus::test_active_roast_status PASSED [ 58%]
tests/unit/mcp_servers/roaster_control/test_roast_tracker.py::TestT0Detection::test_t0_not_detected_initially PASSED [ 58%]
tests/unit/mcp_servers/roaster_control/test_roast_tracker.py::TestT0Detection::test_t0_detected_on_temperature_drop PASSED [ 59%]
tests/unit/mcp_servers/roaster_control/test_roast_tracker.py::TestT0Detection::test_t0_not_detected_on_small_drop PASSED [ 59%]
tests/unit/mcp_servers/roaster_control/test_roast_tracker.py::TestT0Detection::test_t0_only_detected_once PASSED [ 60%]
tests/unit/mcp_servers/roaster_control/test_roast_tracker.py::TestT0Detection::test_beans_added_temp_is_none_before_t0 PASSED [ 60%]
tests/unit/mcp_servers/roaster_control/test_roast_tracker.py::TestT0Detection::test_beans_added_temp_captured_correctly PASSED [ 60%]
tests/unit/mcp_servers/roaster_control/test_roast_tracker.py::TestRateOfRise::test_ror_is_none_initially PASSED [ 61%]
tests/unit/mcp_servers/roaster_control/test_roast_tracker.py::TestRateOfRise::test_ror_is_none_with_one_reading PASSED [ 61%]
tests/unit/mcp_servers/roaster_control/test_roast_tracker.py::TestRateOfRise::test_ror_calculated_with_two_readings PASSED [ 62%]
tests/unit/mcp_servers/roaster_control/test_roast_tracker.py::TestRateOfRise::test_ror_with_partial_window PASSED [ 62%]
tests/unit/mcp_servers/roaster_control/test_roast_tracker.py::TestRateOfRise::test_ror_with_full_60_second_window PASSED [ 62%]
tests/unit/mcp_servers/roaster_control/test_roast_tracker.py::TestRateOfRise::test_ror_with_negative_rate PASSED [ 63%]
tests/unit/mcp_servers/roaster_control/test_roast_tracker.py::TestRateOfRise::test_ror_with_zero_rate PASSED [ 63%]
tests/unit/mcp_servers/roaster_control/test_roast_tracker.py::TestDevelopmentTime::test_first_crack_not_reported_initially PASSED [ 64%]
tests/unit/mcp_servers/roaster_control/test_roast_tracker.py::TestDevelopmentTime::test_report_first_crack PASSED [ 64%]
tests/unit/mcp_servers/roaster_control/test_roast_tracker.py::TestDevelopmentTime::test_first_crack_reported_once PASSED [ 65%]
tests/unit/mcp_servers/roaster_control/test_roast_tracker.py::TestDevelopmentTime::test_development_time_none_before_first_crack PASSED [ 65%]
tests/unit/mcp_servers/roaster_control/test_roast_tracker.py::TestDevelopmentTime::test_development_time_calculated_after_first_crack PASSED [ 65%]
tests/unit/mcp_servers/roaster_control/test_roast_tracker.py::TestDevelopmentTime::test_development_time_percentage PASSED [ 66%]
tests/unit/mcp_servers/roaster_control/test_roast_tracker.py::TestDevelopmentTime::test_development_time_none_without_t0 PASSED [ 66%]
tests/unit/mcp_servers/roaster_control/test_roast_tracker.py::TestBeanDrop::test_drop_not_recorded_initially PASSED [ 67%]
tests/unit/mcp_servers/roaster_control/test_roast_tracker.py::TestBeanDrop::test_record_drop PASSED [ 67%]
tests/unit/mcp_servers/roaster_control/test_roast_tracker.py::TestBeanDrop::test_drop_recorded_once PASSED [ 67%]
tests/unit/mcp_servers/roaster_control/test_roast_tracker.py::TestBeanDrop::test_total_roast_duration PASSED [ 68%]
tests/unit/mcp_servers/roaster_control/test_roast_tracker.py::TestBeanDrop::test_total_roast_duration_none_without_t0 PASSED [ 68%]
tests/unit/mcp_servers/roaster_control/test_roast_tracker.py::TestBeanDrop::test_development_time_clamped_to_drop PASSED [ 69%]
tests/unit/mcp_servers/roaster_control/test_roast_tracker.py::TestBeanDrop::test_get_metrics_complete PASSED [ 69%]
tests/unit/mcp_servers/roaster_control/test_session_manager.py::TestSessionLifecycle::test_session_not_active_initially PASSED [ 70%]
tests/unit/mcp_servers/roaster_control/test_session_manager.py::TestSessionLifecycle::test_start_session PASSED [ 70%]
tests/unit/mcp_servers/roaster_control/test_session_manager.py::TestSessionLifecycle::test_start_session_connects_hardware PASSED [ 70%]
tests/unit/mcp_servers/roaster_control/test_session_manager.py::TestSessionLifecycle::test_start_session_starts_polling PASSED [ 71%]
tests/unit/mcp_servers/roaster_control/test_session_manager.py::TestSessionLifecycle::test_start_session_idempotent PASSED [ 71%]
tests/unit/mcp_servers/roaster_control/test_session_manager.py::TestSessionLifecycle::test_stop_session PASSED [ 72%]
tests/unit/mcp_servers/roaster_control/test_session_manager.py::TestSessionLifecycle::test_stop_session_stops_polling PASSED [ 72%]
tests/unit/mcp_servers/roaster_control/test_session_manager.py::TestSessionLifecycle::test_stop_session_idempotent PASSED [ 72%]
tests/unit/mcp_servers/roaster_control/test_session_manager.py::TestSessionLifecycle::test_session_survives_multiple_start_stop_cycles PASSED [ 73%]
tests/unit/mcp_servers/roaster_control/test_session_manager.py::TestControlCommands::test_set_heat PASSED [ 73%]
tests/unit/mcp_servers/roaster_control/test_session_manager.py::TestControlCommands::test_set_heat_validates_range PASSED [ 74%]
tests/unit/mcp_servers/roaster_control/test_session_manager.py::TestControlCommands::test_set_heat_validates_increments PASSED [ 74%]
tests/unit/mcp_servers/roaster_control/test_session_manager.py::TestControlCommands::test_set_fan PASSED [ 75%]
tests/unit/mcp_servers/roaster_control/test_session_manager.py::TestControlCommands::test_start_roaster PASSED [ 75%]
tests/unit/mcp_servers/roaster_control/test_session_manager.py::TestControlCommands::test_stop_roaster PASSED [ 75%]
tests/unit/mcp_servers/roaster_control/test_session_manager.py::TestControlCommands::test_drop_beans PASSED [ 76%]
tests/unit/mcp_servers/roaster_control/test_session_manager.py::TestControlCommands::test_start_cooling PASSED [ 76%]
tests/unit/mcp_servers/roaster_control/test_session_manager.py::TestControlCommands::test_stop_cooling PASSED [ 77%]
tests/unit/mcp_servers/roaster_control/test_session_manager.py::TestStatusQueries::test_get_status_returns_roast_status PASSED [ 77%]
tests/unit/mcp_servers/roaster_control/test_session_manager.py::TestStatusQueries::test_get_status_includes_session_active PASSED [ 77%]
tests/unit/mcp_servers/roaster_control/test_session_manager.py::TestStatusQueries::test_get_status_includes_sensors PASSED [ 78%]
tests/unit/mcp_servers/roaster_control/test_session_manager.py::TestStatusQueries::test_get_status_includes_metrics PASSED [ 78%]
tests/unit/mcp_servers/roaster_control/test_session_manager.py::TestStatusQueries::test_get_status_is_thread_safe PASSED [ 79%]
tests/unit/mcp_servers/roaster_control/test_session_manager.py::TestStatusQueries::test_report_first_crack PASSED [ 79%]
tests/unit/mcp_servers/shared/test_auth0_middleware.py::test_check_scope_from_scope_claim PASSED [ 80%]
tests/unit/mcp_servers/shared/test_auth0_middleware.py::test_check_scope_empty PASSED [ 80%]
tests/unit/mcp_servers/shared/test_auth0_middleware.py::test_check_scope_missing_scope PASSED [ 80%]
tests/unit/mcp_servers/shared/test_auth0_middleware.py::test_get_client_info_extraction PASSED [ 81%]
tests/unit/mcp_servers/shared/test_auth0_middleware.py::test_get_client_info_with_multiple_scopes PASSED [ 81%]
tests/unit/mcp_servers/shared/test_auth0_middleware.py::test_get_client_info_minimal_fields PASSED [ 82%]
tests/unit/mcp_servers/shared/test_auth0_middleware.py::test_log_client_action_basic PASSED [ 82%]
tests/unit/mcp_servers/shared/test_auth0_middleware.py::test_log_client_action_with_details PASSED [ 82%]
tests/unit/mcp_servers/shared/test_auth0_middleware.py::test_validate_auth0_token_success PASSED [ 83%]
tests/unit/mcp_servers/shared/test_auth0_middleware.py::test_validate_auth0_token_missing_config PASSED [ 83%]
tests/unit/mcp_servers/shared/test_auth0_middleware.py::test_validate_auth0_token_invalid_signature PASSED [ 84%]
tests/unit/mcp_servers/shared/test_auth0_middleware.py::test_rbac_scenario_observer_vs_operator PASSED [ 84%]
tests/integration/mcp_servers/test_file_detection.py::test_server_initialization FAILED [ 85%]
tests/integration/mcp_servers/test_file_detection.py::test_list_tools FAILED [ 85%]
tests/integration/mcp_servers/test_file_detection.py::test_health_resource FAILED [ 85%]
tests/integration/mcp_servers/test_file_detection.py::test_get_status_no_session FAILED [ 86%]
tests/integration/mcp_servers/test_file_detection.py::test_start_detection_missing_file SKIPPED [ 86%]
tests/integration/mcp_servers/test_file_detection.py::test_stop_detection_no_session FAILED [ 87%]
tests/integration/mcp_servers/test_file_detection.py::test_full_workflow_with_test_file SKIPPED [ 87%]
tests/integration/mcp_servers/test_file_detection.py::test_with_real_audio_file FAILED [ 87%]
tests/integration/mcp_servers/test_roaster_control_sse.py::test_health_endpoint_public PASSED [ 88%]
tests/integration/mcp_servers/test_roaster_control_sse.py::test_root_endpoint_public PASSED [ 88%]
tests/integration/mcp_servers/test_roaster_control_sse.py::test_sse_endpoint_requires_auth PASSED [ 89%]
tests/integration/mcp_servers/test_roaster_control_sse.py::test_sse_endpoint_requires_roaster_scope PASSED [ 89%]
tests/integration/mcp_servers/test_roaster_control_sse.py::test_observer_can_connect SKIPPED [ 90%]
tests/integration/mcp_servers/test_roaster_control_sse.py::test_operator_can_connect SKIPPED [ 90%]
tests/integration/mcp_servers/test_roaster_control_sse.py::test_client_connection_logged 